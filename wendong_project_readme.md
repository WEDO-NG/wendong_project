# wendong_project

> 一个基于 **Monorepo 架构** 的个人前端技术学习与实践项目。

---

## 一、项目背景与目标

**wendong_project** 是一个长期维护的个人项目，主要用于系统性学习和实践前端工程化与架构设计能力。

项目的核心目标包括：

- 学习并实践 **Monorepo** 项目管理方式
- 沉淀 **可复用的业务逻辑模型**（business-core）
- 探索 **业务逻辑与 UI 逻辑解耦** 的工程实践
- 为未来支持 **Web / 小程序 / 鸿蒙** 等多端形态提前做好架构准备
- 记录构建工具（Webpack）与性能优化的演进过程

该项目不仅关注“能跑”，更关注：

> **是否清晰、是否可扩展、是否经得起长期演进**

---

## 二、为什么选择 Monorepo

随着项目逐步演进，会同时存在以下内容：

- Web 前端应用（React）
- Node.js 服务端
- 公共业务逻辑
- 通用工具库
- 多端适配层（Web / 小程序 / 鸿蒙）

如果使用传统的多仓库模式，会面临：

- 代码重复
- 版本难以统一
- 业务逻辑无法复用

因此本项目选择 **Monorepo** 作为整体管理方案。

### Monorepo 的核心思想

> **一个仓库，多个相互关联但职责清晰的 package**

每个 package 都是独立的模块，但它们在同一个仓库中协同演进。

---

## 三、Monorepo 技术选型

| 项目          | 选型              |
| ------------- | ----------------- |
| 包管理器      | pnpm（workspace） |
| Monorepo 方案 | pnpm workspace    |
| Node 版本     | >= 18             |

选择 pnpm 的原因：

- 原生支持 workspace
- 依赖去重能力强，磁盘占用低
- 安装速度快，适合多 package 场景

---

## 四、整体架构设计

### 4.1 分层设计思想

```
UI 层（React / Antd）
        ↓
转换层（Adapters）
        ↓
业务逻辑层（business-core）
        ↓
基础设施 / 工具
```

### 4.2 各层职责说明

- **业务逻辑层（business-core）**
  - 只描述业务规则与流程
  - 不依赖 UI 框架或运行平台
  - 可被多端复用

- **转换层（adapters）**
  - 将业务逻辑适配到具体平台
  - 隔离 Web / 小程序 / 鸿蒙 的平台差异

- **UI 层**
  - 负责页面展示与用户交互
  - 不直接承载复杂业务规则

---

## 五、business-core 设计说明

### 5.1 business-core 是什么

> **business-core 是项目中的“业务大脑”**

它包含：

- 业务模型（Domain Model）
- 业务规则（Rules）
- 业务流程（Flows）
- 业务状态约束（状态机思想）

其核心特征是：

- 不依赖 React、Antd 等 UI 框架
- 不依赖浏览器 / 小程序 / 鸿蒙 API
- 仅通过输入和输出描述业务行为

### 5.2 状态机思想（设计层面）

在复杂业务中，业务并不是简单的 if / else，而是：

> **状态在合法规则下不断演进的过程**

在当前阶段：

- 采用轻量状态机思想
- 不依赖第三方状态机库
- 为未来引入完整状态机方案预留空间

---

## 六、设计原则（Design Principles）

本项目在设计与实现过程中，遵循以下核心原则：

### 6.1 业务优先于技术实现

- 先抽象业务模型，再选择技术方案
- 技术不反向塑造业务结构

---

### 6.2 业务逻辑与 UI 逻辑严格分离

- business-core 中不得出现 UI 代码
- UI 不直接承载复杂业务规则

---

### 6.3 状态只能通过规则流转

- 核心业务状态集中定义
- 禁止随意修改关键业务状态

---

### 6.4 面向多端的架构前置设计

- Web 并非唯一运行平台
- adapters 用于隔离平台差异

---

### 6.5 单一职责与清晰边界

- 每个 package 只做一类事情
- 边界清晰优先于技巧复杂度

---

### 6.6 可测试性优先

- 核心业务逻辑应具备可测试性
- 避免在业务层引入不可控副作用

---

### 6.7 为演进保留空间

- 初期方案允许简单，但结构必须正确
- 避免过早引入复杂工具

---

## 七、目录结构规划

```bash
wendong_project
├── apps/
│   ├── web-react/            # React Web 客户端
│   └── server-node/          # Node.js 服务端（后续）
│
├── packages/
│   ├── business-core/        # 业务逻辑核心
│   ├── web-ui/               # Web 端 UI 组件库 (React)
│   ├── adapters/             # 多端转换层
│   └── utils/                # 通用工具库
│
├── configs/
│   ├── webpack/
│   └── eslint/
│
├── scripts/
├── pnpm-workspace.yaml
├── package.json
└── README.md
```

---

## 八、Phase 1：最小落地目标（MVP）

### 8.1 Phase 1 总体目标

- 初始化 Monorepo 仓库
- 确定 React 技术栈
- 搭建一个 **可运行的 React Web 项目**

Phase 1 的目标是验证技术链路与项目骨架，而非实现完整业务。

---

### 8.2 Phase 1 明确不做的事情

- 不接入小程序 / 鸿蒙
- 不实现完整 business-core 逻辑
- 不引入复杂状态机库
- 不做 Webpack 性能优化

---

### 8.3 React 技术栈决策（Phase 1 定版）

本项目在 Phase 1 阶段，对 React 技术栈做出如下明确决策：

#### React

- 使用 **较新但稳定** 的 React 主版本
- 采用函数组件 + Hooks
- 不使用实验性 API

**决策原因：**

- 社区成熟、长期维护
- 心智模型稳定
- 有利于后续多端与工程化演进

---

#### UI 组件库

- 选择 **Ant Design** 作为 UI 基础库

**决策原因：**

- 组件覆盖全面
- 社区成熟
- 企业级场景验证充分

---

#### 工具库

- 引入 **Lodash** 作为基础工具库

**决策原因：**

- 解决常见工具方法问题
- 避免重复造轮子

---

#### 构建工具

- 使用 **Webpack 5**

**决策原因：**

- 对构建流程有完全掌控能力
- 适合记录构建优化过程
- 更利于工程化能力沉淀

---

### 8.4 Phase 1 完成标准（验收条件）

Phase 1 完成时，应满足以下条件：

- pnpm workspace 正常工作
- apps/web-react 可独立启动
- React + Ant Design + Lodash 可正常使用
- 项目结构与文档描述一致

满足以上条件，即可进入 Phase 2。

---

## 九、后续阶段规划

### Phase 2

- 引入 adapters（Web Adapter）
- 明确业务逻辑与平台逻辑边界
- 开始沉淀工程化优化记录

### Phase 3

- 接入小程序端
- 接入鸿蒙端
- 构建多端共用业务体系

---

## 十、写在最后

该项目是一个 **长期演进型个人工程项目**。

> 用清晰的结构承载复杂的业务，用可演进的设计对抗未来的不确定性。

本文档会随着项目演进持续更新。
